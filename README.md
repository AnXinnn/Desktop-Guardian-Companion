# 陪伴桌面守护

基于 Vue.js + uni-app 的全栈项目开发《陪伴桌面守护》—— 一款专为老年人设计的智能桌面应用，提供便捷的联系人管理、用药提醒、在线问诊等功能。

## 📋 项目简介

陪伴桌面守护是一款面向老年用户的移动端应用，采用简洁直观的桌面式设计，帮助用户轻松管理联系人、设置用药提醒、进行在线问诊等。应用采用 uni-app 框架开发，支持多端部署（H5、小程序、App）。

## 🛠️ 技术栈

- **前端框架**: Vue 3.4.21
- **跨平台框架**: uni-app 3.0.0
- **构建工具**: Vite 5.2.8
- **UI组件**: uni-components
- **第三方服务**:
  - 百度千帆AI（客服聊天）
  - 高德地图API（天气和位置）
  - 农历日历（lunar-calendar）

## ✨ 已有功能

### 1. 桌面主页
- ✅ 多页面轮播设计（3页：主页、应用页1、应用页2）
- ✅ 实时时间显示（12小时制，带AM/PM）
- ✅ 日期显示（公历 + 农历）
- ✅ 天气信息展示（基于位置获取）
- ✅ 用户码显示（用于远程协助）
- ✅ 联系人卡片快捷入口
- ✅ 底部Dock栏（电话、相机、微信）

### 2. 联系人管理
- ✅ 添加联系人（姓名、微信备注、手机号、头像、分组）
- ✅ 编辑联系人信息
- ✅ 删除联系人
- ✅ 联系人详情弹窗
- ✅ 快速拨打电话
- ✅ 微信视频通话（跳转）
- ✅ 微信语音通话（跳转）
- ✅ 联系人卡片在主页面显示
- ✅ **联系人搜索功能**：实时搜索联系人（支持姓名、微信备注、手机号）
- ✅ **联系人分组功能**：支持分组管理（家人、朋友、医生、其他），分组标签显示
- ✅ **通话记录功能**：记录通话历史（拨出、呼入），支持快速回拨，时间格式化显示

### 3. 用药提醒
- ✅ 添加用药提醒
- ✅ 编辑用药提醒
- ✅ 删除用药提醒
- ✅ 药品图片上传（拍照/相册选择）
- ✅ 每日用量备注
- ✅ 用药频率设置（每天1-4次、每2天1次、每周1次、按需服用）
- ✅ 提醒时间设置
- ✅ 用药周期设置（开始日期、结束日期）
- ✅ 备注信息
- ✅ 下次提醒时间自动计算
- ✅ 数据本地存储
- ✅ **用药记录功能**：记录用药情况（按时、延迟、漏服），统计功能（总记录、按时用药、延迟用药、漏服），按药品和日期范围筛选，显示药品图片和用量信息

### 4. 在线问诊
- ✅ 图文问诊
- ✅ 语音问诊
- ✅ 视频问诊
- ✅ 问诊表单（症状描述、年龄、性别、手机号、图片上传）
- ✅ 问诊历史记录
- ✅ 问诊状态显示（待接诊、进行中、已完成）
- ✅ 数据本地存储
- ✅ **问诊详情页**：查看问诊详细信息（问诊类型、时间、状态、接诊医生），患者信息展示，症状描述和图片预览，对话记录展示，医生建议，电子处方管理
- ✅ **医生评价功能**：对已完成问诊的医生进行评价（1-5星评价，评价内容），评价记录保存

### 5. 桌面守护
- ✅ 系统权限管理界面
- ✅ 权限状态显示（已开启/未开启）
- ✅ 权限说明
- ✅ 跳转系统设置页面
- ✅ 权限列表：
  - 位置信息
  - 相机权限
  - 存储权限
  - 电话权限
  - 音频权限
  - 辅助功能权限
  - 悬浮窗权限
  - 安装应用权限
  - 查询应用权限

### 6. 个人中心
- ✅ 用户信息展示（头像、昵称、用户码）
- ✅ 登录功能（手机号 + 验证码）
- ✅ 已绑定家人管理（待实现）
- ✅ 安全桌面设置：
  - 强制桌面开关
  - 锁定桌面开关
  - 稳定桌面开关
- ✅ 功能设置：
  - 骚扰防护开关
  - 升级版本
- ✅ 用户协议和隐私政策入口
- ✅ 版本信息显示

### 7. 客服中心
- ✅ 客服联系方式展示（电话、微信、在线客服）
- ✅ 在线客服聊天功能
- ✅ 集成百度千帆AI（ernie-3.5-8k模型）
- ✅ 消息历史记录
- ✅ 自动滚动到底部

### 8. 数据同步与备份
- ✅ **Node.js后端服务**：基于Express框架的RESTful API服务
- ✅ **API工具类**：统一的前端API请求封装（`src/utils/api.js`）
- ✅ **云端数据同步**：支持同步联系人、用药提醒、用药记录、问诊记录、通话记录到云端
- ✅ **数据备份与恢复**：支持数据备份和从云端恢复数据功能
- ✅ **用户认证**：基于用户ID的数据隔离（简化版，生产环境需升级为JWT）

### 9. 其他功能
- ✅ 登录页面（手机号验证码登录）
- ✅ 安全桌面页面（强制桌面、锁定桌面、稳定桌面）
- ✅ 页面导航优化（返回指定页面）
- ✅ 数据本地存储（uni.getStorageSync/setStorageSync）
- ✅ 图片选择和处理
- ✅ 表单验证

## 🚀 可优化或添加的功能

### 🔴 最高优先级（桌面软件核心功能）

#### 1. 应用启动器功能 ✅ **已完成**
- ✅ **获取已安装应用列表**：使用Android API获取系统已安装应用（图标、名称、包名）
- ✅ **启动应用功能**：通过包名启动真机上的应用，支持系统应用和第三方应用
- ✅ **应用分类显示**：按类别分类（社交、工具、娱乐、系统等），常用应用，全部应用
- ✅ **应用过滤**：过滤系统应用选项，隐藏/显示应用（UI开关）
- ✅ **应用搜索**：实时搜索已安装应用（支持名称和包名搜索）
- ✅ **最近使用记录**：自动记录最近使用的应用（最多20个）

#### 2. 设置为默认桌面 ✅ **已完成**
- ✅ **注册为桌面应用**：在manifest.json中配置`android.intent.category.HOME`
- ✅ **Home键拦截**：拦截系统Home键事件，保持在桌面应用（通过manifest配置）
- ✅ **桌面选择器**：首次使用时显示桌面选择器提示，用户可手动设置
- ✅ **默认桌面检查**：自动检查当前是否为默认桌面
- ✅ **返回键拦截**：配合强制桌面模式，拦截返回键防止退出

### 🟡 高优先级（完善桌面体验）

#### 3. 应用搜索功能 ⚠️ **缺失**
- ⚠️ **全局应用搜索**：在桌面顶部添加搜索框，实时搜索已安装应用
- ⚠️ **智能搜索**：支持拼音搜索、模糊搜索、应用分类搜索

#### 4. 应用管理功能 ⚠️ **缺失**
- ⚠️ **应用排序**：长按拖拽排序，保存排序结果
- ⚠️ **应用卸载**：长按应用显示操作菜单，跳转到系统卸载页面
- ⚠️ **应用隐藏**：隐藏不需要显示的应用，隐藏列表管理
- ⚠️ **应用信息**：显示应用版本、大小、安装时间等信息

#### 5. 用药提醒功能增强
- ⚠️ **推送通知功能**：实现实际的系统推送提醒，在设置的时间点提醒用户用药
- ⚠️ **药品库**：接入药品数据库，自动识别药品信息
- ⚠️ **用药冲突检测**：检测多种药物之间的相互作用
- ⚠️ **用药提醒重复设置**：支持一天多次提醒（早中晚）

#### 6. 桌面守护功能完善 ⚠️ **部分实现**
- ⚠️ **强制桌面模式**：拦截返回键，防止退出桌面，禁用最近任务键
- ⚠️ **应用锁定**：锁定指定应用，需要密码才能打开，应用使用时间限制
- ⚠️ **骚扰拦截**：电话拦截（黑名单），短信拦截，拦截记录查看

### 🟢 中优先级（增强用户体验）

#### 7. 在线问诊功能完善
- ⚠️ **对接真实医生API**：连接真实的在线问诊平台
- ⚠️ **支付功能**：集成支付接口，支持问诊费用支付
- ⚠️ **实时对话功能**：实现与医生的实时对话交互

#### 8. 联系人功能增强 ✅ **已完成**
- ✅ **一键修复功能实现**：实现联系人信息的自动修复和同步（去重、数据验证、云端同步）
- ✅ **联系人导入/导出**：支持从系统通讯录导入，导出为JSON备份文件
- ✅ **联系人去重**：自动识别和合并重复联系人（基于手机号匹配）
- ✅ **数据验证**：验证和修复联系人数据格式

#### 9. 桌面管理功能 ⚠️ **缺失**
- ⚠️ **文件夹管理**：创建文件夹，拖拽应用到文件夹，文件夹命名和管理
- ⚠️ **桌面布局管理**：应用位置调整（拖拽移动），跨页面移动，添加/删除桌面页面
- ⚠️ **壁纸设置**：从相册选择壁纸，系统壁纸库，自定义壁纸（拍照）

#### 10. 最近使用应用 ⚠️ **缺失**
- ⚠️ **最近使用记录**：记录应用启动时间，显示最近使用的应用（最多10个）
- ⚠️ **常用应用**：在桌面或Dock栏显示常用应用

#### 11. 底部Dock栏增强 ⚠️ **部分实现**
- ⚠️ **动态添加应用**：从应用列表拖拽到Dock栏，Dock栏应用管理（最多5个）

#### 12. 数据同步与备份增强
- ⚠️ **多设备同步**：支持多个设备之间的数据同步
- ⚠️ **数据加密**：敏感数据加密存储和传输
- ⚠️ **数据库集成**：将内存存储替换为MongoDB/MySQL等持久化数据库
- ⚠️ **JWT认证**：实现完整的JWT用户认证和授权机制
- ⚠️ **自动同步**：实现数据变更的自动同步机制

### 🔵 低优先级（辅助功能）

#### 13. 客服聊天功能优化
- ⚠️ **表情面板**：添加表情选择功能
- ⚠️ **图片发送**：支持发送图片给客服
- ⚠️ **语音消息**：支持语音消息发送
- ⚠️ **客服排队**：多人排队等待客服
- ⚠️ **常见问题**：FAQ快速回复

#### 14. 应用功能实现
- ⚠️ **短信功能**：发送和接收短信
- ⚠️ **付款码功能**：生成支付二维码
- ⚠️ **扫一扫功能**：二维码扫描
- ⚠️ **相册功能**：图片浏览和管理
- ⚠️ **计算器功能**：基础计算器
- ⚠️ **日历功能**：日历查看和事件管理

#### 15. 系统集成功能
- ⚠️ **系统通知管理**：显示系统通知，通知管理（清除、设置）
- ⚠️ **快捷方式管理**：创建应用快捷方式，系统快捷方式（WiFi、蓝牙、手电筒等）
- ⚠️ **远程协助功能**：通过用户码建立连接，远程桌面查看，远程操作

#### 16. 辅助功能
- ⚠️ **语音点读功能**：文字转语音朗读
- ⚠️ **拍照朗读功能**：拍照识别文字并朗读（OCR + TTS）
- ⚠️ **悬浮球功能**：快捷操作悬浮球
- ⚠️ **语音设置**：语音助手设置
- ⚠️ **呼叫设置**：快捷呼叫设置

#### 17. UI/UX优化
- ⚠️ **主题切换**：支持深色/浅色主题
- ⚠️ **字体大小调节**：支持字体大小自定义（适合老年用户）
- ⚠️ **动画效果**：添加页面切换动画，应用启动动画
- ⚠️ **无障碍支持**：支持屏幕阅读器等无障碍功能

#### 18. 性能优化
- ⚠️ **图片压缩**：上传图片自动压缩
- ⚠️ **懒加载**：应用列表虚拟滚动，分页加载
- ⚠️ **缓存优化**：应用图标缓存，优化数据缓存策略
- ⚠️ **代码分割**：按需加载代码
- ⚠️ **启动速度优化**：减少启动时间，预加载关键数据

#### 19. 其他功能
- ⚠️ **教程中心**：使用教程和帮助文档
- ⚠️ **亲友管理**：家人账号绑定和管理
- ⚠️ **版本更新**：应用版本检查和更新
- ⚠️ **意见反馈**：用户反馈收集

## 📅 后续开发计划

### 第一阶段：桌面核心功能（2-3周）🔴 **最高优先级**

#### Week 1-2: 应用启动器功能
- [x] 实现获取已安装应用列表（Android API）
- [x] 实现应用启动功能（通过包名）
- [x] 实现应用图标和名称获取（图标暂时使用默认占位符）
- [x] 实现应用分类（社交、工具、娱乐等）
- [x] 实现应用过滤（系统应用/第三方应用）
- [x] 实现应用搜索功能
- [x] 实现最近使用记录
- [ ] 优化应用列表性能（虚拟滚动）- 待优化

#### Week 3: 设置为默认桌面
- [x] 配置manifest.json注册为桌面应用
- [x] 实现Home键拦截（通过manifest配置）
- [x] 实现桌面选择器逻辑
- [x] 实现默认桌面状态检查
- [x] 实现返回键拦截（配合强制桌面模式）

### 第二阶段：桌面管理功能（2-3周）🟡 **高优先级**

#### Week 4-5: 应用搜索和管理
- [ ] 实现全局应用搜索功能
- [ ] 实现应用排序（拖拽排序）
- [ ] 实现应用卸载功能
- [ ] 实现应用隐藏功能
- [ ] 实现应用信息显示

#### Week 6: 桌面布局和文件夹
- [ ] 实现应用拖拽移动
- [ ] 实现文件夹创建和管理
- [ ] 实现桌面页面管理
- [ ] 实现布局保存和恢复

### 第三阶段：功能完善（2-3周）🟡 **中优先级**

#### Week 7-8: 用药提醒和桌面守护
- [ ] 实现用药提醒推送通知
- [ ] 实现强制桌面模式（拦截返回键）
- [ ] 实现应用锁定功能
- [ ] 实现骚扰拦截功能

#### Week 9: 其他桌面功能
- [ ] 实现最近使用应用
- [ ] 实现Dock栏动态添加应用
- [ ] 实现壁纸设置功能
- [ ] 优化桌面交互体验

### 第四阶段：优化和增强（1-2周）🔵 **低优先级**

#### Week 10: 在线问诊和数据同步
- [ ] 调研并选择在线问诊API服务商
- [ ] 实现问诊订单创建和支付流程
- [ ] 对接医生接诊和实时对话功能
- [x] ~~实现问诊详情页和评价功能~~（已完成）
- [ ] 设计数据库结构（MongoDB/MySQL）
- [ ] 实现数据加密和安全性保障

#### Week 11: 联系人功能增强
- [x] 实现一键修复功能（联系人信息同步、去重、数据验证）
- [x] 实现联系人导入功能（从系统通讯录导入）
- [x] 实现联系人导出功能（导出为JSON备份）
- [x] 实现联系人去重功能（自动识别和合并重复联系人）
- [x] ~~添加联系人分组功能~~（已完成）
- [x] ~~实现联系人搜索功能~~（已完成）
- [x] ~~添加通话记录功能~~（已完成）

### 第五阶段：功能扩展（1-2个月）🔵 **低优先级**

#### Month 3: 应用功能实现
- [ ] 实现短信功能
- [ ] 实现付款码功能
- [ ] 实现扫一扫功能
- [ ] 实现相册功能
- [ ] 实现计算器功能
- [ ] 实现日历功能

#### Month 4: 辅助功能
- [ ] 实现语音点读功能
- [ ] 实现拍照朗读功能（OCR + TTS）
- [ ] 实现悬浮球功能
- [ ] 实现语音设置和呼叫设置
- [ ] 实现远程协助功能

### 第六阶段：优化与完善（1个月）🔵 **低优先级**

#### Month 5: UI/UX优化
- [ ] 添加主题切换功能
- [ ] 实现字体大小调节
- [ ] 优化动画效果
- [ ] 完善无障碍支持

#### Month 6: 性能优化与测试
- [ ] 图片压缩和优化
- [ ] 代码分割和懒加载
- [ ] 应用列表性能优化（虚拟滚动）
- [ ] 启动速度优化
- [ ] 性能测试和优化
- [ ] 兼容性测试（不同设备和系统版本）
- [ ] 用户测试和反馈收集

### 第七阶段：上线准备（1个月）

#### Month 7: 上线准备
- [ ] 完善用户协议和隐私政策
- [ ] 应用商店上架准备（Google Play、华为应用市场等）
- [ ] 准备应用截图和介绍
- [ ] 编写用户使用手册
- [ ] 准备客服支持系统
- [ ] 桌面应用专项测试

---

## 📖 详细功能分析文档

更多关于桌面软件功能的详细分析和实现建议，请查看：[DESKTOP_FEATURES.md](./DESKTOP_FEATURES.md)

## 📝 开发注意事项

1. **数据安全**：用户隐私数据需要加密存储，遵守相关法律法规
2. **权限申请**：合理申请和使用系统权限，向用户说明权限用途
3. **用户体验**：界面设计要简洁直观，符合老年用户的使用习惯
4. **性能优化**：注意应用启动速度和运行流畅度
5. **兼容性**：确保在不同设备和系统版本上正常运行
6. **错误处理**：完善错误处理和用户提示
7. **代码规范**：保持代码整洁，添加必要注释

## 🔧 开发环境

```bash
# 安装依赖
npm install

# 开发环境运行（H5）
npm run dev:h5

# 开发环境运行（微信小程序）
npm run dev:mp-weixin

# 构建生产版本
npm run build:h5
npm run build:mp-weixin
```

## 📄 项目结构

```
my-vue3-project/
├── src/
│   ├── pages/              # 页面文件
│   │   ├── index/          # 桌面主页
│   │   ├── login/          # 登录页
│   │   ├── my/             # 个人中心
│   │   ├── medicine/       # 医疗相关
│   │   │   ├── medicine-reminder.vue    # 用药提醒
│   │   │   ├── medicine-records.vue      # 用药记录
│   │   │   ├── online-consultation.vue   # 在线问诊
│   │   │   └── consultation-detail.vue   # 问诊详情
│   │   ├── contacts/       # 联系人管理
│   │   │   ├── contacts.vue              # 联系人列表（搜索、分组）
│   │   │   └── call-records.vue          # 通话记录
│   │   ├── guardian/       # 桌面守护
│   │   ├── customer-service/ # 客服中心
│   │   ├── chat/           # 客服聊天
│   │   ├── add-contact/    # 添加/编辑联系人
│   │   └── desk/           # 安全桌面
│   ├── utils/              # 工具类
│   │   └── api.js          # API工具类（数据同步）
│   ├── static/             # 静态资源
│   ├── App.vue             # 应用入口
│   ├── main.js             # 主入口文件
│   └── pages.json          # 页面配置
├── server/                  # 后端服务
│   ├── server.js           # Express服务器
│   ├── package.json        # 后端依赖
│   └── README.md           # 后端文档
├── package.json
└── README.md
```

## 📞 联系方式

- 客服电话: 400-123-4567
- 微信客服: my-customer-service
- 技术支持: 1800517878-29A

## 📜 许可证

本项目为毕业设计项目，仅供学习和研究使用。

---

**最后更新**: 2024年
**版本**: V1.1.0

## 📝 更新日志

### V1.1.0 (2024)
- ✅ 新增联系人搜索和分组功能
- ✅ 新增通话记录功能
- ✅ 新增用药记录功能（统计、筛选）
- ✅ 新增问诊详情页和医生评价功能
- ✅ 新增Node.js后端服务和数据同步功能
- ✅ 优化页面导航逻辑

### V1.0.5 (2024)
- ✅ 基础功能实现
